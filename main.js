(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["main"],{

/***/ "./dist/shared/fesm5/arp-shared.js":
/*!*****************************************!*\
  !*** ./dist/shared/fesm5/arp-shared.js ***!
  \*****************************************/
/*! exports provided: defaultConfig, isReadyEvent */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "defaultConfig", function() { return defaultConfig; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "isReadyEvent", function() { return isReadyEvent; });
function defaultConfig() {
    return {
        rng: {
            type: 'mersenne-twister',
            seed: 12345,
        },
        arena: {
            type: 'simple-grid',
            width: 5,
            height: 5,
        },
    };
}

function isReadyEvent(evt) {
    return evt.type === 'ready';
}

/**
 * Generated bundle index. Do not edit.
 */



//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXJwLXNoYXJlZC5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vYXJwLXNoYXJlZC9jb25maWcudHMiLCJuZzovL2FycC1zaGFyZWQvZXZlbnQudHMiLCJuZzovL2FycC1zaGFyZWQvYXJwLXNoYXJlZC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIENvbmZpZyB7XG4gIHJuZzogUk5HQ29uZmlnXG4gIGFyZW5hOiBBcmVuYUNvbmZpZ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lcnNlbm5lVHdpc3RlclJOR0NvbmZpZyB7XG4gIHR5cGU6ICdtZXJzZW5uZS10d2lzdGVyJ1xuICBzZWVkOiBudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDcnlwdG9STkdDb25maWcge1xuICB0eXBlOiAnY3J5cHRvJ1xufVxuXG5leHBvcnQgdHlwZSBSTkdDb25maWcgPSBNZXJzZW5uZVR3aXN0ZXJSTkdDb25maWcgfCBDcnlwdG9STkdDb25maWdcblxuZXhwb3J0IGludGVyZmFjZSBTaW1wbGVHcmlkQXJlbmFDb25maWcge1xuICB0eXBlOiAnc2ltcGxlLWdyaWQnXG4gIHdpZHRoOiBudW1iZXJcbiAgaGVpZ2h0OiBudW1iZXJcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXZWlnaHRlZEdyaWRBcmVuYUNvbmZpZyB7XG4gIHR5cGU6ICd3ZWlnaHRlZC1ncmlkJ1xuICB3aWR0aDogbnVtYmVyXG4gIGhlaWdodDogbnVtYmVyXG5cbiAgbWFqb3JYOiBudW1iZXJcbiAgbWFqb3JZOiBudW1iZXJcblxuICBtaW5vcldlaWdodDogbnVtYmVyXG4gIG1ham9yV2VpZ2h0OiBudW1iZXJcbn1cblxuZXhwb3J0IHR5cGUgQXJlbmFDb25maWcgPSBTaW1wbGVHcmlkQXJlbmFDb25maWcgfCBXZWlnaHRlZEdyaWRBcmVuYUNvbmZpZ1xuXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdENvbmZpZygpOiBDb25maWcge1xuICByZXR1cm4ge1xuICAgIHJuZzoge1xuICAgICAgdHlwZTogJ21lcnNlbm5lLXR3aXN0ZXInLFxuICAgICAgc2VlZDogMTIzNDUsXG4gICAgfSxcbiAgICBhcmVuYToge1xuICAgICAgdHlwZTogJ3NpbXBsZS1ncmlkJyxcbiAgICAgIHdpZHRoOiA1LFxuICAgICAgaGVpZ2h0OiA1LFxuICAgIH0sXG4gIH1cbn1cbiIsImV4cG9ydCBpbnRlcmZhY2UgQXJlbmFEYXRhIHtcbiAgd2lkdGg6IG51bWJlclxuICBoZWlnaHQ6IG51bWJlclxuICBub2RlczogeyBpZDogbnVtYmVyIH1bXVxuICBlZGdlczoge1xuICAgIGxlZnQ6IG51bWJlcixcbiAgICByaWdodDogbnVtYmVyLFxuICAgIHdlaWdodDogbnVtYmVyLFxuICB9W11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZWFkeUV2ZW50IHtcbiAgdHlwZTogJ3JlYWR5J1xuICBhcmVuYTogQXJlbmFEYXRhXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUHJvZ3Jlc3NFdmVudCB7XG4gIHR5cGU6ICdwcm9ncmVzcydcbn1cblxuZXhwb3J0IHR5cGUgRXZlbnQgPSBSZWFkeUV2ZW50IHwgUHJvZ3Jlc3NFdmVudFxuXG5leHBvcnQgZnVuY3Rpb24gaXNSZWFkeUV2ZW50KGV2dDogRXZlbnQpOiBldnQgaXMgUmVhZHlFdmVudCB7XG4gIHJldHVybiBldnQudHlwZSA9PT0gJ3JlYWR5J1xufVxuIiwiLyoqXG4gKiBHZW5lcmF0ZWQgYnVuZGxlIGluZGV4LiBEbyBub3QgZWRpdC5cbiAqL1xuXG5leHBvcnQgKiBmcm9tICcuL3B1YmxpYy1hcGknO1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7SUFxQ0UsT0FBTztRQUNMLEdBQUcsRUFBRTtZQUNILElBQUksRUFBRSxrQkFBa0I7WUFDeEIsSUFBSSxFQUFFLEtBQUs7U0FDWjtRQUNELEtBQUssRUFBRTtZQUNMLElBQUksRUFBRSxhQUFhO1lBQ25CLEtBQUssRUFBRSxDQUFDO1lBQ1IsTUFBTSxFQUFFLENBQUM7U0FDVjtLQUNGLENBQUE7Q0FDRjs7c0JDMUI0QixHQUFVO0lBQ3JDLE9BQU8sR0FBRyxDQUFDLElBQUksS0FBSyxPQUFPLENBQUE7Q0FDNUI7O0FDeEJEOztHQUVHOzs7OyJ9

/***/ }),

/***/ "./gui/$$_lazy_route_resource lazy recursive":
/*!**********************************************************!*\
  !*** ./gui/$$_lazy_route_resource lazy namespace object ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncaught exception popping up in devtools
	return Promise.resolve().then(function() {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = "./gui/$$_lazy_route_resource lazy recursive";

/***/ }),

/***/ "./gui/app/app.module.ts":
/*!*******************************!*\
  !*** ./gui/app/app.module.ts ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var platform_browser_1 = __webpack_require__(/*! @angular/platform-browser */ "./node_modules/@angular/platform-browser/fesm5/platform-browser.js");
var animations_1 = __webpack_require__(/*! @angular/platform-browser/animations */ "./node_modules/@angular/platform-browser/fesm5/animations.js");
var service_worker_1 = __webpack_require__(/*! @angular/service-worker */ "./node_modules/@angular/service-worker/fesm5/service-worker.js");
var environment_1 = __webpack_require__(/*! ../environments/environment */ "./gui/environments/environment.ts");
var config_module_1 = __webpack_require__(/*! ./config/config.module */ "./gui/app/config/config.module.ts");
var shared_module_1 = __webpack_require__(/*! ./shared/shared.module */ "./gui/app/shared/shared.module.ts");
var root_component_1 = __webpack_require__(/*! ./root.component */ "./gui/app/root.component.ts");
var AppModule = /** @class */ (function () {
    function AppModule() {
    }
    AppModule = tslib_1.__decorate([
        core_1.NgModule({
            declarations: [
                root_component_1.RootComponent,
            ],
            imports: [
                platform_browser_1.BrowserModule,
                animations_1.BrowserAnimationsModule,
                service_worker_1.ServiceWorkerModule.register('ngsw-worker.js', {
                    enabled: environment_1.environment.production,
                }),
                shared_module_1.SharedModule,
                config_module_1.ConfigModule,
            ],
            bootstrap: [root_component_1.RootComponent],
        })
    ], AppModule);
    return AppModule;
}());
exports.AppModule = AppModule;


/***/ }),

/***/ "./gui/app/config/config.module.ts":
/*!*****************************************!*\
  !*** ./gui/app/config/config.module.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var shared_module_1 = __webpack_require__(/*! ../shared/shared.module */ "./gui/app/shared/shared.module.ts");
var group_component_1 = __webpack_require__(/*! ./group.component */ "./gui/app/config/group.component.ts");
var ConfigModule = /** @class */ (function () {
    function ConfigModule() {
    }
    ConfigModule = tslib_1.__decorate([
        core_1.NgModule({
            imports: [
                shared_module_1.SharedModule,
            ],
            exports: [
                group_component_1.ConfigGroupComponent,
            ],
            declarations: [
                group_component_1.ConfigGroupComponent,
            ],
        })
    ], ConfigModule);
    return ConfigModule;
}());
exports.ConfigModule = ConfigModule;


/***/ }),

/***/ "./gui/app/config/config.service.ts":
/*!******************************************!*\
  !*** ./gui/app/config/config.service.ts ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var forms_1 = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
var validators_1 = __webpack_require__(/*! ../shared/utils/validators */ "./gui/app/shared/utils/validators.ts");
var ConfigService = /** @class */ (function () {
    function ConfigService(formBuilder) {
        this.formBuilder = formBuilder;
        this.groups = [
            {
                id: 'rng',
                title: 'Random Number Generator',
                types: [
                    { id: 'mersenne-twister', label: 'Mersenne Twister' },
                    { id: 'crypto', label: 'Cryptographic RNG' },
                ],
                controls: {
                    'mersenne-twister': [
                        {
                            id: 'seed',
                            type: 'number',
                            placeholder: 'Seed',
                            default: 1234,
                            validators: forms_1.Validators.required,
                        },
                    ],
                },
            },
            {
                id: 'arena',
                title: 'Arena',
                types: [
                    { id: 'simple-grid', label: 'Simple Grid' },
                    { id: 'weighted-grid', label: 'Weighted Grid' },
                ],
                controls: {
                    'simple-grid': [
                        {
                            id: 'width',
                            type: 'number',
                            placeholder: 'Width',
                            default: 5,
                            validators: [forms_1.Validators.required, forms_1.Validators.min(0)],
                        },
                        {
                            id: 'height',
                            type: 'number',
                            placeholder: 'Height',
                            default: 5,
                            validators: [forms_1.Validators.required, forms_1.Validators.min(0)],
                        },
                    ],
                    'weighted-grid': [
                        {
                            id: 'width',
                            type: 'number',
                            placeholder: 'Width',
                            default: 5,
                            validators: [forms_1.Validators.required, forms_1.Validators.min(0)],
                        },
                        {
                            id: 'height',
                            type: 'number',
                            placeholder: 'Height',
                            default: 5,
                            validators: [forms_1.Validators.required, forms_1.Validators.min(0)],
                        },
                        {
                            id: 'majorX',
                            type: 'number',
                            placeholder: 'Horizontal Major Streets',
                            default: 2,
                            validators: [forms_1.Validators.required, forms_1.Validators.min(0)],
                        },
                        {
                            id: 'majorY',
                            type: 'number',
                            placeholder: 'Vertical Major Streets',
                            default: 2,
                            validators: [forms_1.Validators.required, forms_1.Validators.min(0)],
                        },
                        {
                            id: 'minorWeight',
                            type: 'number',
                            placeholder: 'Minor Street Weight',
                            default: 5,
                            validators: [forms_1.Validators.required, forms_1.Validators.min(0)],
                        },
                        {
                            id: 'majorWeight',
                            type: 'number',
                            placeholder: 'Major Street Weight',
                            default: 1,
                            validators: [forms_1.Validators.required, forms_1.Validators.min(0)],
                        },
                    ],
                },
            },
        ];
        this.form = this.makeFormGroup();
    }
    Object.defineProperty(ConfigService.prototype, "config", {
        get: function () {
            var e_1, _a;
            var config = {};
            try {
                for (var _b = tslib_1.__values(this.groups), _c = _b.next(); !_c.done; _c = _b.next()) {
                    var group = _c.value;
                    var typeControl = this.form.get(group.id + 'Type');
                    if (!typeControl) {
                        throw new Error('no type control');
                    }
                    var valueControl = this.form.get(group.id);
                    if (!valueControl) {
                        throw new Error('no value control');
                    }
                    config[group.id] = tslib_1.__assign({ type: typeControl.value }, valueControl.value);
                }
            }
            catch (e_1_1) { e_1 = { error: e_1_1 }; }
            finally {
                try {
                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
                }
                finally { if (e_1) throw e_1.error; }
            }
            return config;
        },
        enumerable: true,
        configurable: true
    });
    ConfigService.prototype.updateForm = function (name, value) {
        var e_2, _a;
        var typeControl = this.form.get(name + 'Type');
        if (!typeControl) {
            throw new Error('no type control');
        }
        this.form.removeControl(name);
        var group = this.groups.find(function (g) { return g.id === name; });
        if (!group) {
            throw new Error('no group');
        }
        var controls = group.controls[value];
        if (!controls) {
            return;
        }
        var config = {};
        try {
            for (var controls_1 = tslib_1.__values(controls), controls_1_1 = controls_1.next(); !controls_1_1.done; controls_1_1 = controls_1.next()) {
                var control = controls_1_1.value;
                config[control.id] = [control.default, control.validators];
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (controls_1_1 && !controls_1_1.done && (_a = controls_1.return)) _a.call(controls_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        this.form.addControl(name, this.formBuilder.group(config));
    };
    ConfigService.prototype.makeFormGroup = function () {
        var e_3, _a;
        var config = {};
        try {
            for (var _b = tslib_1.__values(this.groups), _c = _b.next(); !_c.done; _c = _b.next()) {
                var group = _c.value;
                var typeIDs = group.types.map(function (t) { return t.id; });
                if (typeIDs.length === 0) {
                    throw new Error('no type values');
                }
                var typeConfig = [typeIDs[0], [
                        forms_1.Validators.required,
                        validators_1.equalsValidator.apply(void 0, tslib_1.__spread(typeIDs)),
                    ]];
                config[group.id + 'Type'] = typeConfig;
            }
        }
        catch (e_3_1) { e_3 = { error: e_3_1 }; }
        finally {
            try {
                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);
            }
            finally { if (e_3) throw e_3.error; }
        }
        return this.formBuilder.group(config);
    };
    ConfigService = tslib_1.__decorate([
        core_1.Injectable({ providedIn: 'root' }),
        tslib_1.__metadata("design:paramtypes", [forms_1.FormBuilder])
    ], ConfigService);
    return ConfigService;
}());
exports.ConfigService = ConfigService;


/***/ }),

/***/ "./gui/app/config/group.component.html":
/*!*********************************************!*\
  !*** ./gui/app/config/group.component.html ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-expansion-panel>\n  <mat-expansion-panel-header>\n    <mat-panel-title>{{ group?.title }}</mat-panel-title>\n  </mat-expansion-panel-header>\n\n  <mat-form-field class=\"type\">\n    <mat-select *ngIf=\"typeControl\" [formControl]=\"typeControl\" placeholder=\"Type\">\n      <mat-option\n          *ngFor=\"let type of group?.types\"\n          [value]=\"type.id\"\n      >{{ type.label }}</mat-option>\n    </mat-select>\n  </mat-form-field>\n\n  <ng-container *ngIf=\"formGroup$ | async as formGroup\" [formGroup]=\"formGroup\">\n    <mat-form-field *ngFor=\"let control of group?.controls[typeControl?.value]\">\n      <input\n          [formControlName]=\"control.id\"\n          [type]=\"control.type\"\n          [placeholder]=\"control.placeholder\"\n          matInput>\n      <mat-error><app-input-error></app-input-error></mat-error>\n    </mat-form-field>\n  </ng-container>\n\n</mat-expansion-panel>\n"

/***/ }),

/***/ "./gui/app/config/group.component.scss":
/*!*********************************************!*\
  !*** ./gui/app/config/group.component.scss ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ":host {\n  height: -webkit-fit-content;\n  height: -moz-fit-content;\n  height: fit-content; }\n\nmat-expansion-panel {\n  margin: 0;\n  height: 100%; }\n\nmat-panel-title {\n  font-size: 18px; }\n\nmat-form-field {\n  margin: 0 1px; }\n\nmat-form-field.type {\n    display: block; }\n"

/***/ }),

/***/ "./gui/app/config/group.component.ts":
/*!*******************************************!*\
  !*** ./gui/app/config/group.component.ts ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var rxjs_1 = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
var operators_1 = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
var config_service_1 = __webpack_require__(/*! ./config.service */ "./gui/app/config/config.service.ts");
var ConfigGroupComponent = /** @class */ (function () {
    function ConfigGroupComponent(configService) {
        this.configService = configService;
        this.typeControl = null;
        this.formGroup$ = rxjs_1.EMPTY;
    }
    ConfigGroupComponent.prototype.ngOnChanges = function (changes) {
        if (changes.group && this.group) {
            this.typeControl = this.configService.form.get(this.group.id + 'Type');
            this.updateFormGroup(this.group);
        }
    };
    ConfigGroupComponent.prototype.updateFormGroup = function (group) {
        var _this = this;
        if (!this.typeControl) {
            this.formGroup$ = rxjs_1.EMPTY;
            return;
        }
        this.formGroup$ = this.typeControl.valueChanges.pipe(operators_1.startWith(this.typeControl.value), operators_1.map(function (value) {
            _this.configService.updateForm(group.id, value);
            return _this.configService.form.get(group.id);
        }));
    };
    tslib_1.__decorate([
        core_1.Input(),
        tslib_1.__metadata("design:type", Object)
    ], ConfigGroupComponent.prototype, "group", void 0);
    ConfigGroupComponent = tslib_1.__decorate([
        core_1.Component({
            selector: 'app-config-group',
            template: __webpack_require__(/*! ./group.component.html */ "./gui/app/config/group.component.html"),
            styles: [__webpack_require__(/*! ./group.component.scss */ "./gui/app/config/group.component.scss")],
            changeDetection: core_1.ChangeDetectionStrategy.OnPush,
        }),
        tslib_1.__metadata("design:paramtypes", [config_service_1.ConfigService])
    ], ConfigGroupComponent);
    return ConfigGroupComponent;
}());
exports.ConfigGroupComponent = ConfigGroupComponent;


/***/ }),

/***/ "./gui/app/root.component.html":
/*!*************************************!*\
  !*** ./gui/app/root.component.html ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<mat-toolbar color=\"primary\">ARP Simulator</mat-toolbar>\n\n<mat-card>\n  <mat-card-title>\n    <span>Configuration</span>\n\n    <button (click)=\"toggleOpen()\" type=\"button\" mat-icon-button\n        [matTooltip]=\"allOpen ? 'Collapse All' : 'Open All'\">\n      <mat-icon>{{ allOpen ? 'unfold_less' : 'unfold_more' }}</mat-icon>\n    </button>\n\n  </mat-card-title>\n\n  <mat-card-content>\n    <form id=\"config-form\" [formGroup]=\"form\" (ngSubmit)=\"start()\">\n      <mat-accordion [multi]=\"true\">\n        <app-config-group\n            *ngFor=\"let group of groups\"\n            [group]=\"group\">\n        </app-config-group>\n      </mat-accordion>\n    </form>\n  </mat-card-content>\n\n  <mat-card-actions align=\"end\">\n    <button type=\"submit\" form=\"config-form\" mat-raised-button color=\"primary\">Start</button>\n  </mat-card-actions>\n\n</mat-card>\n\n<mat-card>\n  <mat-card-title>\n    Arena\n  </mat-card-title>\n  <mat-card-content>\n    <app-graph [data]=\"arena$ | async\"></app-graph>\n  </mat-card-content>\n</mat-card>\n"

/***/ }),

/***/ "./gui/app/root.component.scss":
/*!*************************************!*\
  !*** ./gui/app/root.component.scss ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "mat-card {\n  margin: 16px; }\n\nmat-card-title {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between; }\n\nmat-accordion {\n  display: -ms-grid;\n  display: grid;\n  grid-gap: 16px;\n  -ms-grid-columns: (1fr)[3];\n      grid-template-columns: repeat(3, 1fr); }\n\n@media (max-width: 959px) {\n    mat-accordion {\n      -ms-grid-columns: (1fr)[2];\n          grid-template-columns: repeat(2, 1fr); } }\n\n@media (max-width: 599px) {\n    mat-accordion {\n      -ms-grid-columns: auto;\n          grid-template-columns: auto; } }\n"

/***/ }),

/***/ "./gui/app/root.component.ts":
/*!***********************************!*\
  !*** ./gui/app/root.component.ts ***!
  \***********************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var material_1 = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
var simulator_service_1 = __webpack_require__(/*! ./shared/services/simulator.service */ "./gui/app/shared/services/simulator.service.ts");
var config_service_1 = __webpack_require__(/*! ./config/config.service */ "./gui/app/config/config.service.ts");
var RootComponent = /** @class */ (function () {
    function RootComponent(configService, simulatorService) {
        this.configService = configService;
        this.simulatorService = simulatorService;
        this.groups = this.configService.groups;
        this.form = this.configService.form;
        this.arena$ = this.simulatorService.arena$;
        this.allOpen = true;
    }
    RootComponent.prototype.ngAfterViewInit = function () {
        var _this = this;
        // Need to do this in the next turn of the change detector
        Promise.resolve().then(function () { return _this.accordion.openAll(); });
    };
    RootComponent.prototype.toggleOpen = function () {
        if (this.allOpen) {
            this.accordion.closeAll();
        }
        else {
            this.accordion.openAll();
        }
        this.allOpen = !this.allOpen;
    };
    RootComponent.prototype.start = function () {
        if (this.form.invalid) {
            console.warn('form invalid');
            return;
        }
        var config = this.configService.config;
        this.allOpen = false;
        this.accordion.closeAll();
        this.simulatorService.start();
        this.simulatorService.run(config);
    };
    tslib_1.__decorate([
        core_1.ViewChild(material_1.MatAccordion),
        tslib_1.__metadata("design:type", material_1.MatAccordion)
    ], RootComponent.prototype, "accordion", void 0);
    RootComponent = tslib_1.__decorate([
        core_1.Component({
            selector: 'app-root',
            template: __webpack_require__(/*! ./root.component.html */ "./gui/app/root.component.html"),
            styles: [__webpack_require__(/*! ./root.component.scss */ "./gui/app/root.component.scss")],
            changeDetection: core_1.ChangeDetectionStrategy.OnPush,
        }),
        tslib_1.__metadata("design:paramtypes", [config_service_1.ConfigService,
            simulator_service_1.SimulatorService])
    ], RootComponent);
    return RootComponent;
}());
exports.RootComponent = RootComponent;


/***/ }),

/***/ "./gui/app/shared/components/graph.component.scss":
/*!********************************************************!*\
  !*** ./gui/app/shared/components/graph.component.scss ***!
  \********************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ":host {\n  display: block;\n  width: 100%;\n  height: 400px;\n  background-color: lightblue; }\n"

/***/ }),

/***/ "./gui/app/shared/components/graph.component.ts":
/*!******************************************************!*\
  !*** ./gui/app/shared/components/graph.component.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var cytoscape = __webpack_require__(/*! cytoscape */ "./node_modules/cytoscape/dist/cytoscape.cjs.js");
var GraphComponent = /** @class */ (function () {
    function GraphComponent(elementRef) {
        this.elementRef = elementRef;
        this.data = {
            width: 0,
            height: 0,
            nodes: [],
            edges: [],
        };
    }
    GraphComponent.prototype.ngOnInit = function () {
        this.cy = cytoscape({
            container: this.elementRef.nativeElement,
            minZoom: 0.5,
            maxZoom: 4,
            style: [
                {
                    selector: 'node',
                    style: {
                        content: 'data(id)',
                        'text-valign': 'center',
                    },
                },
                {
                    selector: 'edge',
                    style: {
                        content: 'data(weight)',
                    },
                },
            ],
        });
    };
    GraphComponent.prototype.ngOnDestroy = function () {
        if (this.cy) {
            this.cy.destroy();
            delete this.cy;
        }
    };
    GraphComponent.prototype.ngOnChanges = function (changes) {
        if (changes.data) {
            this.update();
        }
    };
    GraphComponent.prototype.update = function () {
        var cy = this.cy;
        var data = this.data;
        if (!cy) {
            return;
        }
        if (!data) {
            return;
        }
        cy.batch(function () {
            var nodes = data.nodes.map(function (node) { return ({
                group: 'nodes',
                data: { id: node.id.toString() },
            }); });
            var edges = data.edges.map(function (edge) { return ({
                group: 'edges',
                data: {
                    source: edge.left.toString(),
                    target: edge.right.toString(),
                    weight: edge.weight,
                },
            }); });
            cy.remove('*');
            cy.add(nodes);
            cy.add(edges);
            cy.autolock(false);
            cy
                .layout({
                name: 'grid',
                rows: data.height,
                cols: data.width,
                fit: false,
                avoidOverlapPadding: 50,
            })
                .run();
            cy.autolock(true);
        });
    };
    tslib_1.__decorate([
        core_1.Input(),
        tslib_1.__metadata("design:type", Object)
    ], GraphComponent.prototype, "data", void 0);
    GraphComponent = tslib_1.__decorate([
        core_1.Component({
            selector: 'app-graph',
            template: '',
            styles: [__webpack_require__(/*! ./graph.component.scss */ "./gui/app/shared/components/graph.component.scss")],
            changeDetection: core_1.ChangeDetectionStrategy.OnPush,
        }),
        tslib_1.__metadata("design:paramtypes", [core_1.ElementRef])
    ], GraphComponent);
    return GraphComponent;
}());
exports.GraphComponent = GraphComponent;


/***/ }),

/***/ "./gui/app/shared/components/input-error.component.html":
/*!**************************************************************!*\
  !*** ./gui/app/shared/components/input-error.component.html ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = "<ng-container [ngSwitch]=\"type$ | async\">\n  <ng-container *ngSwitchCase=\"'required'\">This field is required.</ng-container>\n  <ng-container *ngSwitchCase=\"'email'\">Please enter a valid email address.</ng-container>\n  <ng-container *ngSwitchCase=\"'match'\">This field does not match.</ng-container>\n  <ng-container *ngSwitchCase=\"'min'\">Minimum for this field is {{ error.min }}</ng-container>\n  <ng-container *ngSwitchCase=\"'max'\">Maximum for this field is {{ error.max }}</ng-container>\n</ng-container>\n"

/***/ }),

/***/ "./gui/app/shared/components/input-error.component.ts":
/*!************************************************************!*\
  !*** ./gui/app/shared/components/input-error.component.ts ***!
  \************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var material_1 = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
var rxjs_1 = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
var operators_1 = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
var InputErrorComponent = /** @class */ (function () {
    function InputErrorComponent(field) {
        this.field = field;
        this.type$ = rxjs_1.EMPTY;
        this.error = null;
    }
    InputErrorComponent.prototype.ngOnInit = function () {
        var _this = this;
        var control = this.control;
        if (!control || !control.statusChanges) {
            throw new Error('field has no attached control');
        }
        var getError = function () {
            if (!control.errors) {
                return '';
            }
            return Object.keys(control.errors)[0];
        };
        this.type$ = control.statusChanges.pipe(operators_1.map(function () { return getError(); }), operators_1.startWith(getError()), operators_1.tap(function (type) {
            if (control.errors) {
                _this.error = control.errors[type];
            }
        }));
    };
    Object.defineProperty(InputErrorComponent.prototype, "control", {
        get: function () {
            // This is a bit of a hack.  If this field ever goes away, we'll probably
            // need to go back to manually specifiying the control name.
            return this.field._control.ngControl;
        },
        enumerable: true,
        configurable: true
    });
    InputErrorComponent = tslib_1.__decorate([
        core_1.Component({
            selector: 'app-input-error',
            template: __webpack_require__(/*! ./input-error.component.html */ "./gui/app/shared/components/input-error.component.html"),
            changeDetection: core_1.ChangeDetectionStrategy.OnPush,
        }),
        tslib_1.__param(0, core_1.Host()),
        tslib_1.__metadata("design:paramtypes", [material_1.MatFormField])
    ], InputErrorComponent);
    return InputErrorComponent;
}());
exports.InputErrorComponent = InputErrorComponent;


/***/ }),

/***/ "./gui/app/shared/components/loading-spinner.component.scss":
/*!******************************************************************!*\
  !*** ./gui/app/shared/components/loading-spinner.component.scss ***!
  \******************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = ":host {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: rgba(128, 128, 128, 0.4); }\n\nmat-spinner {\n  margin: auto; }\n"

/***/ }),

/***/ "./gui/app/shared/components/loading-spinner.component.ts":
/*!****************************************************************!*\
  !*** ./gui/app/shared/components/loading-spinner.component.ts ***!
  \****************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var LoadingSpinnerComponent = /** @class */ (function () {
    function LoadingSpinnerComponent() {
        this.diameter = 64;
    }
    tslib_1.__decorate([
        core_1.Input(),
        tslib_1.__metadata("design:type", Object)
    ], LoadingSpinnerComponent.prototype, "diameter", void 0);
    LoadingSpinnerComponent = tslib_1.__decorate([
        core_1.Component({
            selector: 'app-loading-spinner',
            template: '<mat-spinner [diameter]="diameter"></mat-spinner>',
            styles: [__webpack_require__(/*! ./loading-spinner.component.scss */ "./gui/app/shared/components/loading-spinner.component.scss")],
            changeDetection: core_1.ChangeDetectionStrategy.OnPush,
        })
    ], LoadingSpinnerComponent);
    return LoadingSpinnerComponent;
}());
exports.LoadingSpinnerComponent = LoadingSpinnerComponent;


/***/ }),

/***/ "./gui/app/shared/services/simulator.service.ts":
/*!******************************************************!*\
  !*** ./gui/app/shared/services/simulator.service.ts ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var rxjs_1 = __webpack_require__(/*! rxjs */ "./node_modules/rxjs/_esm5/index.js");
var operators_1 = __webpack_require__(/*! rxjs/operators */ "./node_modules/rxjs/_esm5/operators/index.js");
var shared_1 = __webpack_require__(/*! @arp/shared */ "./dist/shared/fesm5/arp-shared.js");
var WORKER_PATH = './assets/simulator.js';
var SimulatorService = /** @class */ (function () {
    function SimulatorService() {
        this.eventSubject = new rxjs_1.Subject();
        this.events$ = this.eventSubject.asObservable();
        this.arena$ = this.events$
            .pipe(operators_1.filter(shared_1.isReadyEvent), operators_1.map(function (evt) { return evt.arena; }));
    }
    SimulatorService.prototype.start = function () {
        var _this = this;
        if (this.worker) {
            this.stop();
        }
        console.info('Starting worker...');
        this.worker = new Worker(WORKER_PATH);
        this.worker.addEventListener('message', function (evt) { return _this.onWorkerMessage(evt); });
        this.worker.addEventListener('error', function (evt) { return _this.onWorkerError(evt); });
    };
    SimulatorService.prototype.stop = function () {
        if (!this.worker) {
            return;
        }
        this.worker.terminate();
        delete this.worker;
    };
    SimulatorService.prototype.run = function (config) {
        this.send({ type: 'run', config: config });
    };
    SimulatorService.prototype.send = function (cmd) {
        if (!this.worker) {
            throw new Error('simulator not started');
        }
        this.worker.postMessage(cmd);
    };
    SimulatorService.prototype.onWorkerMessage = function (messageEvent) {
        var evt = messageEvent.data;
        console.log('simulator event:', evt);
        this.eventSubject.next(evt);
    };
    SimulatorService.prototype.onWorkerError = function (evt) {
        console.error('Simulator error:', evt);
    };
    SimulatorService = tslib_1.__decorate([
        core_1.Injectable({ providedIn: 'root' })
    ], SimulatorService);
    return SimulatorService;
}());
exports.SimulatorService = SimulatorService;


/***/ }),

/***/ "./gui/app/shared/shared.module.ts":
/*!*****************************************!*\
  !*** ./gui/app/shared/shared.module.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__(/*! tslib */ "./node_modules/tslib/tslib.es6.js");
var common_1 = __webpack_require__(/*! @angular/common */ "./node_modules/@angular/common/fesm5/common.js");
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var forms_1 = __webpack_require__(/*! @angular/forms */ "./node_modules/@angular/forms/fesm5/forms.js");
var material_1 = __webpack_require__(/*! @angular/material */ "./node_modules/@angular/material/esm5/material.es5.js");
var graph_component_1 = __webpack_require__(/*! ./components/graph.component */ "./gui/app/shared/components/graph.component.ts");
var input_error_component_1 = __webpack_require__(/*! ./components/input-error.component */ "./gui/app/shared/components/input-error.component.ts");
var loading_spinner_component_1 = __webpack_require__(/*! ./components/loading-spinner.component */ "./gui/app/shared/components/loading-spinner.component.ts");
var SharedModule = /** @class */ (function () {
    function SharedModule() {
    }
    SharedModule = tslib_1.__decorate([
        core_1.NgModule({
            imports: [
                common_1.CommonModule,
                forms_1.ReactiveFormsModule,
                material_1.MatButtonModule,
                material_1.MatCardModule,
                material_1.MatExpansionModule,
                material_1.MatFormFieldModule,
                material_1.MatIconModule,
                material_1.MatInputModule,
                material_1.MatProgressSpinnerModule,
                material_1.MatSelectModule,
                material_1.MatToolbarModule,
                material_1.MatTooltipModule,
            ],
            exports: [
                common_1.CommonModule,
                forms_1.ReactiveFormsModule,
                material_1.MatButtonModule,
                material_1.MatCardModule,
                material_1.MatExpansionModule,
                material_1.MatFormFieldModule,
                material_1.MatIconModule,
                material_1.MatInputModule,
                material_1.MatProgressSpinnerModule,
                material_1.MatSelectModule,
                material_1.MatToolbarModule,
                material_1.MatTooltipModule,
                graph_component_1.GraphComponent,
                input_error_component_1.InputErrorComponent,
                loading_spinner_component_1.LoadingSpinnerComponent,
            ],
            declarations: [
                graph_component_1.GraphComponent,
                input_error_component_1.InputErrorComponent,
                loading_spinner_component_1.LoadingSpinnerComponent,
            ],
        })
    ], SharedModule);
    return SharedModule;
}());
exports.SharedModule = SharedModule;


/***/ }),

/***/ "./gui/app/shared/utils/validators.ts":
/*!********************************************!*\
  !*** ./gui/app/shared/utils/validators.ts ***!
  \********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function equalsValidator() {
    var values = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        values[_i] = arguments[_i];
    }
    return function (control) {
        if (values.indexOf(control.value) === -1) {
            return { equals: true };
        }
        return null;
    };
}
exports.equalsValidator = equalsValidator;


/***/ }),

/***/ "./gui/environments/environment.ts":
/*!*****************************************!*\
  !*** ./gui/environments/environment.ts ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// This file can be replaced during build by using the `fileReplacements` array.
// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.
// The list of file replacements can be found in `angular.json`.
Object.defineProperty(exports, "__esModule", { value: true });
var version_1 = __webpack_require__(/*! ./version */ "./gui/environments/version.ts");
exports.environment = {
    name: 'development',
    version: version_1.VERSION,
    production: false,
};
/*
 * In development mode, to ignore zone related error stack frames such as
 * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can
 * import the following file, but please comment it out in production mode
 * because it will have performance impact when throw error
 */
__webpack_require__(/*! zone.js/dist/zone-error */ "./node_modules/zone.js/dist/zone-error.js"); // Included with Angular CLI.


/***/ }),

/***/ "./gui/environments/version.ts":
/*!*************************************!*\
  !*** ./gui/environments/version.ts ***!
  \*************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.VERSION = {
    tag: 'v0.0.0',
    branch: 'update',
    commit: '5e2ec8daf3740b5513d4850c15bf94860ff8eff7',
    short: '5e2ec8d',
    string: 'v0.0.0-5e2ec8d*',
};


/***/ }),

/***/ "./gui/main.ts":
/*!*********************!*\
  !*** ./gui/main.ts ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var core_1 = __webpack_require__(/*! @angular/core */ "./node_modules/@angular/core/fesm5/core.js");
var platform_browser_dynamic_1 = __webpack_require__(/*! @angular/platform-browser-dynamic */ "./node_modules/@angular/platform-browser-dynamic/fesm5/platform-browser-dynamic.js");
var app_module_1 = __webpack_require__(/*! ./app/app.module */ "./gui/app/app.module.ts");
var environment_1 = __webpack_require__(/*! ./environments/environment */ "./gui/environments/environment.ts");
if (environment_1.environment.production) {
    core_1.enableProdMode();
}
console.info('commit:', environment_1.environment.version.commit);
console.info('branch:', environment_1.environment.version.branch);
console.info('version:', environment_1.environment.version.tag);
console.info('environment:', environment_1.environment.name);
platform_browser_dynamic_1.platformBrowserDynamic()
    .bootstrapModule(app_module_1.AppModule)
    .then(function () { return document.body.classList.remove('app-loading'); })
    .catch(function (err) { return console.error('Angular bootstrap error:', err); });


/***/ }),

/***/ 0:
/*!***************************!*\
  !*** multi ./gui/main.ts ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! /home/tom/code/arp/gui/main.ts */"./gui/main.ts");


/***/ })

},[[0,"runtime","vendor"]]]);
//# sourceMappingURL=main.js.map